<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<title>WMP – Personen System</title>

<style>
body {
    margin: 0;
    font-family: Arial, sans-serif;
    background: #0f1115;
    color: #fff;
    display: flex;
    height: 100vh;
}

.sidebar {
    width: 30%;
    background: #151820;
    padding: 20px;
    overflow-y: auto;
}

.sidebar h2 {
    margin-top: 0;
}

.person {
    background: #1e2230;
    padding: 15px;
    margin-bottom: 10px;
    cursor: pointer;
    border-radius: 8px;
    font-size: 18px;
}

.person:hover {
    background: #2a2f45;
}

.main {
    width: 70%;
    padding: 25px;
}

input, textarea {
    width: 100%;
    padding: 10px;
    margin-bottom: 10px;
    background: #1e2230;
    border: none;
    border-radius: 6px;
    color: #fff;
    font-size: 16px;
}

textarea {
    height: 70px;
}

label {
    display: block;
    margin: 6px 0;
}

button {
    padding: 12px;
    margin-right: 10px;
    font-size: 16px;
    border: none;
    border-radius: 6px;
    cursor: pointer;
}

.save {
    background: #3b82f6;
    color: #fff;
}

.delete {
    background: #ef4444;
    color: #fff;
}
</style>
</head>

<body>

<div class="sidebar">
    <h2>Personen</h2>
    <button class="save" onclick="addPerson()">+ Neue Person</button>
    <div id="personList"></div>
</div>

<div class="main">
    <h2>Details</h2>

    <input id="name" placeholder="Name">
    <input id="age" placeholder="Alter">
    <input id="height" placeholder="Größe">
    <input id="eyes" placeholder="Augenfarbe">

    <textarea id="info" placeholder="Weitere Informationen"></textarea>
    <textarea id="crimes" placeholder="Delikte"></textarea>

    <label><input type="checkbox" id="warrant"> Haftbefehl</label>
    <label><input type="checkbox" id="watch"> Unter Beobachtung</label>
    <label><input type="checkbox" id="clean"> Clean / Safe</label>
    <label><input type="checkbox" id="prison"> Derzeit in Haft</label>

    <br>
    <button class="save" onclick="savePerson()">Speichern</button>
    <button class="delete" onclick="deletePerson()">Löschen</button>
</div>

<script>
let persons = JSON.parse(localStorage.getItem("wmp_persons")) || [];
let currentIndex = null;

function renderList() {
    const list = document.getElementById("personList");
    list.innerHTML = "";
    persons.forEach((p, i) => {
        const div = document.createElement("div");
        div.className = "person";
        div.innerText = p.name || "Unbekannt";
        div.onclick = () => loadPerson(i);
        list.appendChild(div);
    });
}

function addPerson() {
    persons.push({});
    currentIndex = persons.length - 1;
    renderList();
    loadPerson(currentIndex);
}

function loadPerson(index) {
    currentIndex = index;
    const p = persons[index];
    name.value = p.name || "";
    age.value = p.age || "";
    height.value = p.height || "";
    eyes.value = p.eyes || "";
    info.value = p.info || "";
    crimes.value = p.crimes || "";
    warrant.checked = p.warrant || false;
    watch.checked = p.watch || false;
    clean.checked = p.clean || false;
    prison.checked = p.prison || false;
}

function savePerson() {
    if (currentIndex === null) return;

    persons[currentIndex] = {
        name: name.value,
        age: age.value,
        height: height.value,
        eyes: eyes.value,
        info: info.value,
        crimes: crimes.value,
        warrant: warrant.checked,
        watch: watch.checked,
        clean: clean.checked,
        prison: prison.checked
    };

    localStorage.setItem("wmp_persons", JSON.stringify(persons));
    renderList();
    alert("Gespeichert");
}

function deletePerson() {
    if (currentIndex === null) return;

    const code = prompt("Delete-Code eingeben:");
    if (code !== "2025") {
        alert("Falscher Code");
        return;
    }

    persons.splice(currentIndex, 1);
    localStorage.setItem("wmp_persons", JSON.stringify(persons));
    currentIndex = null;
    renderList();
    alert("Person gelöscht");
}

renderList();
</script>

</body>
</html>
